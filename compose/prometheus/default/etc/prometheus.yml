global:
  scrape_interval:     15s
  evaluation_interval: 15s
  external_labels:
    cluster: homelab
    env:     default

# Alertmanager (disabled by default — uncomment to enable)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ["alertmanager:9093"]

# Rule files (none by default)
rule_files: []

scrape_configs:
  # ── Prometheus self-monitoring ─────────────────────────────────────────
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  # ── Node Exporter (host metrics) ──────────────────────────────────────
  # Expects node-exporter container on vnet-backend. Enable when added.
  # - job_name: node-exporter
  #   static_configs:
  #     - targets: ["node-exporter:9100"]

  # ── cAdvisor (Docker container metrics) ───────────────────────────────
  # - job_name: cadvisor
  #   static_configs:
  #     - targets: ["cadvisor:8080"]

  # ── Traefik ───────────────────────────────────────────────────────────
  - job_name: traefik
    static_configs:
      - targets: ["traefik:8080"]
    metrics_path: /metrics

  # ── Vault ─────────────────────────────────────────────────────────────
  - job_name: vault
    metrics_path: /v1/sys/metrics
    params:
      format: ["prometheus"]
    scheme: http
    static_configs:
      - targets: ["vault:8200"]

  # ── PostgreSQL (postgres-exporter) ────────────────────────────────────
  # - job_name: postgres-exporter
  #   static_configs:
  #     - targets: ["postgres-exporter:9187"]

  # ── Redis (redis-exporter) ────────────────────────────────────────────
  # - job_name: redis-exporter
  #   static_configs:
  #     - targets: ["redis-exporter:9121"]

  # ── RabbitMQ ──────────────────────────────────────────────────────────
  # - job_name: rabbitmq
  #   static_configs:
  #     - targets: ["rabbitmq:15692"]

  # ── Loki ──────────────────────────────────────────────────────────────
  - job_name: loki
    static_configs:
      - targets: ["loki:3100"]
    metrics_path: /metrics

  # ── Grafana ───────────────────────────────────────────────────────────
  - job_name: grafana
    static_configs:
      - targets: ["grafana:3000"]
    metrics_path: /metrics
